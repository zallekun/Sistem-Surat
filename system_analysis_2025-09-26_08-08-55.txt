=== SISTEM SURAT PENGAJUAN MAHASISWA - STRUCTURE ANALYZER ===

Base Path: C:\laragon\www\sistem-surat

Analysis Date: 2025-09-26 08:08:55


============================================================
DATABASE STRUCTURE
============================================================
  
ğŸ“‹ Table: users
    Purpose: User authentication & roles (mahasiswa, staff_prodi, staff_fakultas, kaprodi)
    Key Fields: id, name, email, role, prodi_id, fakultas_id
    Relationships: belongsTo: prodi, belongsTo: fakultas
  
ğŸ“‹ Table: fakultas
    Purpose: Master data fakultas
    Key Fields: id, nama_fakultas, kode_fakultas
    Relationships: hasMany: prodi, hasMany: users
  
ğŸ“‹ Table: prodi
    Purpose: Master data program studi
    Key Fields: id, nama_prodi, kode_prodi, fakultas_id
    Relationships: belongsTo: fakultas, hasMany: users, hasMany: pengajuan_surats
  
ğŸ“‹ Table: jenis_surats
    Purpose: Master jenis surat (MA, KP, TA, SKM)
    Key Fields: id, nama_jenis, kode_surat, template_path
    Relationships: hasMany: pengajuan_surats
  
ğŸ“‹ Table: pengajuan_surats
    Purpose: CORE TABLE - Data pengajuan surat mahasiswa
    Key Fields: id, tracking_token, nim, nama_mahasiswa, email, jenis_surat_id, prodi_id, keperluan, additional_data, status, approved_by_prodi, approved_at_prodi, rejected_by_prodi, rejection_reason_prodi, completed_by, completed_at, download_url
    Relationships: belongsTo: prodi, belongsTo: jenisSurat
  
ğŸ“Š STATUS FLOW UNTUK PENGAJUAN MAHASISWA:
    â€¢ pending: Menunggu review dari staff prodi
    â€¢ approved_prodi: Disetujui prodi, diteruskan ke fakultas
    â€¢ processed: Sedang diproses di fakultas
    â€¢ sedang_ditandatangani: Menunggu tanda tangan fisik
    â€¢ completed: Surat selesai dan dapat didownload
    â€¢ rejected_prodi: Ditolak oleh prodi
    â€¢ rejected_fakultas: Ditolak oleh fakultas

============================================================
MODELS STRUCTURE
============================================================
  
ğŸ—ï¸ Model: User.php
    âœ… EXISTS
    Relationships:
      âŒ belongsTo: prodi
      âŒ belongsTo: fakultas
    Key Methods:
      âŒ hasRole()
      âŒ isStaffProdi()
      âŒ isStaffFakultas()
  
ğŸ—ï¸ Model: PengajuanSurat.php
    âœ… EXISTS
    Relationships:
      âŒ belongsTo: prodi
      âŒ belongsTo: jenisSurat
      âŒ belongsTo: user
    Key Methods:
      âŒ generateToken()
      âŒ canBeProcessed()
      âœ… markAsPrinted()
  
ğŸ—ï¸ Model: JenisSurat.php
    âœ… EXISTS
    Relationships:
      âŒ hasMany: pengajuan_surats
    Key Methods:
      âŒ getTemplatePathAttribute()
  
ğŸ—ï¸ Model: Prodi.php
    âœ… EXISTS
    Relationships:
      âŒ belongsTo: fakultas
      âŒ hasMany: users
      âŒ hasMany: pengajuan_surats
  
ğŸ—ï¸ Model: Fakultas.php
    âœ… EXISTS
    Relationships:
      âŒ hasMany: prodi
      âŒ hasMany: users

============================================================
CONTROLLERS STRUCTURE
============================================================
  
ğŸ® Controller: PengajuanSuratController.php
    Purpose: Handle pengajuan dari mahasiswa (public)
    Middleware: Array
    âŒ NOT FOUND
  
ğŸ® Controller: StaffPengajuanController.php
    Purpose: Handle review pengajuan oleh staff prodi
    Middleware: Array
    âœ… EXISTS
    Methods:
      âœ… index()
      âœ… show()
      âŒ processPengajuan()
      âŒ getStatistics()
  
ğŸ® Controller: FakultasStaffController.php
    Purpose: Handle surat yang sudah disetujui prodi
    Middleware: Array
    âœ… EXISTS
    Methods:
      âœ… index()
      âœ… show()
      âœ… processPengajuanFromProdi()
  
ğŸ® Controller: SuratFSIController.php
    Purpose: Generate dan manage surat FSI
    Middleware: Array
    âœ… EXISTS
    Methods:
      âœ… preview()
      âŒ generatePDF()
      âœ… printSurat()
      âŒ uploadSigned()

============================================================
VIEWS STRUCTURE
============================================================
  
ğŸ“„ View Directory: pengajuan/
    Purpose: Views untuk mahasiswa mengajukan surat
    âŒ DIRECTORY NOT FOUND
  
ğŸ“„ View Directory: staff/pengajuan/
    Purpose: Views untuk staff prodi review pengajuan
    âœ… DIRECTORY EXISTS
      âœ… index.blade.php
      âœ… show.blade.php
  
ğŸ“„ View Directory: fakultas/surat/
    Purpose: Views untuk staff fakultas manage surat
    âœ… DIRECTORY EXISTS
      âœ… index.blade.php
      âœ… show.blade.php
  
ğŸ“„ View Directory: surat/fsi/
    Purpose: Views untuk preview dan edit surat
    âœ… DIRECTORY EXISTS
      âœ… preview-editable.blade.php
  
ğŸ“„ View Directory: surat/pdf/
    Purpose: Templates PDF untuk print surat
    âœ… DIRECTORY EXISTS
      âœ… surat-ma.blade.php
      âœ… surat-kp.blade.php
      âŒ surat-ta.blade.php

============================================================
ROUTES STRUCTURE
============================================================
  âœ… Route file exists: web.php
    
Public Routes (Mahasiswa):
      âœ… GET /pengajuan
      âŒ GET /pengajuan/create
      âœ… POST /pengajuan
      âŒ GET /pengajuan/track
    
Staff Prodi Routes:
      âŒ GET /staff/pengajuan
      âŒ GET /staff/pengajuan/{id}
      âŒ POST /staff/pengajuan/{id}/process
    
Staff Fakultas Routes:
      âŒ GET /fakultas/surat
      âŒ GET /fakultas/surat/{id}
      âŒ GET /fakultas/surat/fsi/preview/{id}
      âŒ POST /fakultas/surat/fsi/print/{id}

============================================================
MIGRATIONS
============================================================
  âœ… Migration directory exists
    âœ… create_users_table
    âœ… create_fakultas_table
    âœ… create_prodi_table
    âŒ create_jenis_surats_table
    âœ… create_pengajuan_surats_table

============================================================
SEEDERS
============================================================
  âœ… Seeder directory exists
    âŒ RolePermissionSeeder.php
    âœ… FakultasSeeder.php
    âœ… ProdiSeeder.php
    âœ… JenisSuratSeeder.php
    âœ… UserSeeder.php

============================================================
SYSTEM SUMMARY
============================================================
  ğŸ¯ FOCUS: Sistem Pengajuan Surat Mahasiswa
  ğŸ“‹ Core Feature: Mahasiswa dapat mengajukan surat secara online
  ğŸ‘¥ User Roles:
       â€¢ Mahasiswa: Mengajukan surat
       â€¢ Staff Prodi: Review dan approve pengajuan
       â€¢ Staff Fakultas: Generate dan manage surat
       â€¢ Kaprodi: Approve pengajuan (sama seperti staff prodi)
  
ğŸ“Š Workflow:
    1. Mahasiswa submit pengajuan surat online
    2. Staff Prodi/Kaprodi review dan approve/reject
    3. Staff Fakultas generate surat dan print untuk TTD
    4. Setelah TTD, upload link surat signed
    5. Status completed, surat dapat didownload mahasiswa
  
ğŸ”§ Tech Stack:
    â€¢ Laravel (Backend)
    â€¢ Blade Templates (Views)
    â€¢ Tailwind CSS (Styling)
    â€¢ DomPDF (PDF Generation)
    â€¢ Spatie Roles & Permissions
  
ğŸ“„ Supported Letter Types:
    â€¢ MA: Surat Mahasiswa Aktif
    â€¢ KP: Surat Kerja Praktek
    â€¢ TA: Surat Tugas Akhir
    â€¢ SKM: Surat Keterangan Mahasiswa